<app-header></app-header>

<div class="title">
  <h1>Registrar Clientes y Cuentas</h1>
</div>

<div class="botones flex justify-end mt-10 mb-10 mr-20">
  <button mat-raised-button (click)="redireccionar('/')" class="button-white">
    <mat-icon>keyboard_arrow_left</mat-icon>Volver
  </button>
  <button mat-raised-button (click)="redireccionar('/check-clients-accounts')" class="button-orange">
    <mat-icon>visibility</mat-icon>
    Ver Registros
  </button>
</div>

<div class="container-stepper flex justify-center w-full">
  <div class="w-11/12">
    <mat-vertical-stepper linear="true" #stepper animationDuration="2000" class="mat-elevation-z8">
      <mat-step optional="false">
        <!-- <form [formGroup]="formClient"> -->
        <ng-template matStepLabel>Registro de Cliente</ng-template>

        <div class="form-client flex justify-center my-10">
          <form [formGroup]="formClient" class="flex flex-wrap w-full">
            <div class="w-full mb-4">
              <label class="title-form pl-2">Registro de Cliente</label>
            </div>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Nombres</mat-label>
              <input matInput formControlName="nombres_vc" />
              <mat-error *ngIf="
                  formClient.controls['nombres_vc'].invalid ||
                  formClient.controls['nombres_vc'].touched
                ">
                <mat-error *ngIf="formClient.controls['nombres_vc'].errors?.['required']">
                  El campo es requerido
                </mat-error>
                <mat-error *ngIf="formClient.controls['nombres_vc'].errors?.['pattern']">
                  Ingrese solamente letras
                </mat-error>
              </mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Paterno</mat-label>
              <input matInput formControlName="paterno_vc" />
              <mat-error *ngIf="
                  formClient.controls['paterno_vc'].invalid ||
                  formClient.controls['paterno_vc'].touched
                ">
                <mat-error *ngIf="formClient.controls['paterno_vc'].errors?.['required']">
                  El campo es requerido
                </mat-error>
                <mat-error *ngIf="formClient.controls['paterno_vc'].errors?.['pattern']">
                  Ingrese solamente letras
                </mat-error>
              </mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Materno</mat-label>
              <input matInput formControlName="materno_vc" />
              <mat-error *ngIf="
                  formClient.controls['materno_vc'].invalid ||
                  formClient.controls['materno_vc'].touched
                ">
                <mat-error *ngIf="formClient.controls['materno_vc'].errors?.['required']">
                  El campo es requerido
                </mat-error>
                <mat-error *ngIf="formClient.controls['materno_vc'].errors?.['pattern']">
                  Ingrese solamente letras
                </mat-error>
              </mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Fecha de Nacimiento</mat-label>
              <input matInput formControlName="fecha_nacimiento_vc" type="date" [max]="maxDate" />
              <mat-error *ngIf="
                  formClient.controls['fecha_nacimiento_vc'].invalid ||
                  formClient.controls['fecha_nacimiento_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Documento</mat-label>
              <input matInput formControlName="documento_vc" />
              <mat-error *ngIf="
                  formClient.controls['documento_vc'].invalid ||
                  formClient.controls['documento_vc'].touched
                ">
                <mat-error *ngIf="formClient.controls['documento_vc'].errors?.['required']">
                  El campo es requerido
                </mat-error>
                <mat-error *ngIf="formClient.controls['documento_vc'].errors?.['pattern']">
                  Ingrese solamente n√∫meros positivos
                </mat-error>
              </mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Estado Civil</mat-label>
              <mat-select formControlName="estado_civil_vc">
                <mat-option *ngFor="let item of listStatus" [value]="item.description">{{ item.description
                  }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  formClient.controls['estado_civil_vc'].invalid ||
                  formClient.controls['estado_civil_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Domicilio</mat-label>
              <input matInput formControlName="domicilio_vc" />
              <mat-error *ngIf="
                  formClient.controls['domicilio_vc'].invalid ||
                  formClient.controls['domicilio_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Nacionalidad</mat-label>
              <mat-select formControlName="nacionalidad_vc">
                <mat-option *ngFor="let item of listNationality" [value]="item.description">{{ item.description
                  }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  formClient.controls['nacionalidad_vc'].invalid ||
                  formClient.controls['nacionalidad_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <div class="w-full flex justify-start">
              <button class="button-blue" mat-raised-button matStepperNext>
                Siguiente
              </button>

              <button class="button-orange" mat-raised-button (click)="registrarCliente(stepper)">
                Registrar Cliente
              </button>
            </div>
          </form>
        </div>

        <!-- </form> -->
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>Registro de Cuenta</ng-template>

        <div class="form-client flex justify-center my-10">
          <form [formGroup]="formCuenta" class="flex flex-wrap w-full">
            <div class="w-full mb-4">
              <label class="title-form pl-2">Registro de Cuenta</label>
            </div>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Documento</mat-label>
              <input matInput formControlName="cliente_documento_vc" [(ngModel)]="this.formClient.value.documento_vc" />
              <mat-error *ngIf="
                  formCuenta.controls['cliente_documento_vc'].invalid ||
                  formCuenta.controls['cliente_documento_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Nombre Cuenta</mat-label>
              <input matInput formControlName="nombre_cuenta_vc" />
              <mat-error *ngIf="
                  formCuenta.controls['nombre_cuenta_vc'].invalid ||
                  formCuenta.controls['nombre_cuenta_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Tipo de Cuenta</mat-label>
              <mat-select formControlName="tipo_cuenta_vc">
                <mat-option *ngFor="let item of listTypeAccount" [value]="item.description">{{ item.description
                  }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  formCuenta.controls['tipo_cuenta_vc'].invalid ||
                  formCuenta.controls['tipo_cuenta_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Tipo de Moneda</mat-label>
              <mat-select formControlName="tipo_moneda_vc">
                <mat-option *ngFor="let item of listTypeCurrency" [value]="item.description">{{ item.description
                  }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  formCuenta.controls['tipo_moneda_vc'].invalid ||
                  formCuenta.controls['tipo_moneda_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <mat-form-field class="w-1/3 px-2" appearance="outline">
              <mat-label>Sucursal</mat-label>
              <mat-select formControlName="sucursal_vc">
                <mat-option *ngFor="let item of listBranch" [value]="item.description">{{ item.description
                  }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  formCuenta.controls['sucursal_vc'].invalid ||
                  formCuenta.controls['sucursal_vc'].touched
                ">El campo es requerido</mat-error>
            </mat-form-field>

            <div class="w-full flex justify-start">
              <button mat-raised-button matStepperPrevious class="button-blue">Anterior</button>
              <button mat-raised-button (click)="registrarCuenta()" class="button-orange">Registrar Cuenta</button>
            </div>
          </form>
        </div>
      </mat-step>
    </mat-vertical-stepper>
  </div>
</div>

<app-footer></app-footer>